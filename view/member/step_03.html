<?php
include $_SERVER['DOCUMENT_ROOT'].'/view/common/header.html';
?>

<div id="container" class="container-full">
	<div id="content" class="content">
		<div class="inner">
			<div class="tit-box-h3">
				<h3 class="tit-h3">회원가입</h3>
				<div class="sub-depth">
					<span><i class="icon-home"><span>홈</span></i></span>
					<strong>회원가입</strong>
				</div>
			</div>

			<div class="join-step-bar">
				<ul>
					<li><i class="icon-join-agree"></i> 약관동의</li>
					<li><i class="icon-join-chk"></i> 본인확인</li>
					<li class="last on"><i class="icon-join-inp"></i> 정보입력</li>
				</ul>
			</div>

			<form class="section-content" id="signUp">
				<table border="0" cellpadding="0" cellspacing="0" class="tbl-col-join">
					<caption class="hidden">강의정보</caption>
					<colgroup>
						<col style="width:15%"/>
						<col style="*"/>
					</colgroup>

					<tbody>
						<tr>
							<th scope="col"><span class="icons">*</span>이름</th>
							<td><input type="text" class="input-text" id= "userName" name= "userName" style="width:302px" required/>
                            <span id="userNameResult" class=""float-right"></span></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>아이디</th>
							<td><input type="text" class="input-text" id="userId" name= "userId" style="width:302px" placeholder="영문자로 시작하는 4~15자의 영문소문자, 숫자" required/><a href="#" class="btn-s-tin ml10" id="idCheckBtn">중복확인</a></td>
						    <input type = "hidden" name="idChkFrm" value="">
                        </tr>
						<tr>
							<th scope="col"><span class="icons">*</span>비밀번호</th>
							<td><input type="password" class="input-text" id="userPw" name="userPw" mode="pwpw" style="width:302px" placeholder="8-15자의 영문자/숫자 혼합" required/><span id="pwd1Result" class="float-right"></span></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>비밀번호 확인</th>
							<td><input type="password" class="input-text" id="userPw2" name="userPw2" style="width:302px" required/><span id="pwd2Result" class="float-right" ></span></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>이메일주소</th>
							<td>
								<input type="text" class="input-text" id="mail[0]" name="mail[0]" style="width:138px" required/> @ <input type="text" id="mail1" name="mail[1]" class="input-text" style="width:138px" placeholder="직접입력" required/>
								<select class="input-sel" id="selmail" name="selmail" style="width:160px">
                                    <option id="navesr" value="naver.com">---분류---</option>
									<option id="naver" value="naver.com">naver.com</option>
									<option id="gmail" value="gmail.com">gmail.com</option>
									<option id="daum" value="daum.net">daum.net</option>
									<option id="stella" value="stella.com">stella.com</option>
									<option id="hackers" value="hackers.com">hackers.com</option>
								</select>
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>휴대폰 번호</th>
							<td>
								<input type="text" class="input-text" name="phone[0]" style="width:50px" value=<?php echo $_SESSION["phone1"];?> readonly="readonly" required /> -
								<input type="text" class="input-text" name="phone[1]" style="width:50px" value=<?php echo $_SESSION["phone2"];?> readonly="readonly" required /> -
								<input type="text" class="input-text" name="phone[2]" style="width:50px" value=<?php echo $_SESSION["phone3"];?> readonly="readonly" required/>
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons"></span>일반전화 번호</th>
							<td><input type="text" class="input-text" id="tel[0]" name="tel[0]" maxlength="3" style="width:88px" value=""/> - <input type="text" maxlength="3" class="input-text" id="tel[1]" name="tel[1]"style="width:88px"/> - <input type="text" maxlength="4" class="input-text" id="tel[2]" name="tel[2]" style="width:88px"/></td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>주소</th>
							<td>
								<p >
									<label>우편번호 <input type="text" class="input-text ml5" id="address1" name="address1"  style="width:242px" required/></label><a href="#" class="btn-s-tin ml10" onclick="address()">주소찾기</a>
								</p>
								<p class="mt10">
									<label>기본주소 <input type="text" class="input-text ml5" id="address2" name="address2" style="width:719px" required/></label>
								</p>
								<p class="mt10">
									<label>상세주소 <input type="text" class="input-text ml5" id="address3" name="address3" style="width:719px" required/></label>
								</p>
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>SMS수신</th>
							<td>
								<div class="box-input">
									<label class="input-sp">
										<input type="radio" name="sendSms" id="sendSms1" value="y" checked="checked"/>
										<span class="input-txt">수신함</span>
									</label>
									<label class="input-sp">
										<input type="radio" name="sendSms" id="sendSms2" value="n" />
										<span class="input-txt">미수신</span>
									</label>
								</div>
								<p>SMS수신 시, 해커스의 혜택 및 이벤트 정보를 받아보실 수 있습니다.</p>
							</td>
						</tr>
						<tr>
							<th scope="col"><span class="icons">*</span>메일수신</th>
							<td>
								<div class="box-input">
									<label class="input-sp">
										<input type="radio" name="sendMail" value="y" id="radio1" checked="checked"/>
										<span class="input-txt">수신함</span>
									</label>
									<label class="input-sp">
										<input type="radio" name="sendMail" id="radio2" value="n"/>
										<span class="input-txt">미수신</span>
									</label>
								</div>
								<p>메일수신 시, 해커스의 혜택 및 이벤트 정보를 받아보실 수 있습니다.</p>
							</td>
						</tr>
					</tbody>
				</table>
				<input type="hidden" name="mode" value="signUp">
				<div class="box-btn">
					<input type="button" id="signUpBtn" class="btn-l" value="회원가입">
				</div>
			</form>
            </div>
		</div>
	</div>
</div>


<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js">
	//다음 주소 api
</script>
<script>
$('#signUpBtn').click(function() {
    /*회원가입 버튼 클릭시*/

    $.post('/controller/memberController.php', $('#signUp').serialize(), function(data) {

        if(data.success == false) {

            alert(data.msg);
            return false;

        }
		if(data.success == true) {

			alert(data.msg);
			location.href='/controller/memberController.php?mode=complete';
			return true;

		}

	},'json');

});
</script>
<script>
//엔터키 차단

$('input[type="text"]').keydown(function() {

	if (event.keyCode === 13) {
		event.preventDefault();
	}

});

$('#idCheckBtn').click(function() {

    $.post('/controller/memberController.php', { mode: 'idChk', userId : $('#userId').val() }, function(data) {

        alert(data.msg);

        if(data.success == false) {

            $('input:hidden[name=idChkFrm]').val('');
            $("#userId").val('');
            $("#userId").focus();

        }
        if(data.success == true) {

            $('input:hidden[name=idChkFrm]').val('check');
            $("#userPw").focus();

        }

    }, 'json');

});

$('#userPw').keyup(function() {

    $.post('/controller/memberController.php', { mode: 'pwChk', userPw : $('#userPw').val() }, function(data) {

        if(data == false) {

            $('#pwd1Result').empty();
            $('#pwd1Result').append(data.msg).css("color","red");

        } else {

            $('#pwd1Result').empty();
            $('#pwd1Result').append(data.msg).css("color","green");

		}

    }, 'json');
});

$('#userPw2').keyup(function() {

    $.post('/controller/memberController.php', {mode: 'pwValidatiaon',  userPw : $('#userPw').val(), userPw2 : $('#userPw2').val()}, function(data) {

        if(data == false) {

            $('#pwd2Result').empty();
            $('#pwd2Result').append(data.msg).css("color","red");

        } else {

            $('#pwd2Result').empty();
            $('#pwd2Result').append(data.msg).css("color", "green");

        }

	}, 'json');

});

</script>
<script>
    /*메일주소 select시 선택된 값 텍스트박스에 삽입*/
    $("#selmail").change(function() {
        /*       alert($(this).val());*/
        $("input:text[id=mail1]").val($(this).val());
    });
</script>
<script>

    function address() {

        new daum.Postcode({

            oncomplete: function(data) {

                var fullAddr = ''; // 주소 변수
                var extraAddr = '';
                if (data.userSelectedType === 'R') { // 도로명

                    fullAddr = data.roadAddress;

                } else { // 지번

                    fullAddr = data.jibunAddress;

                }

                if(data.userSelectedType === 'R'){

                    //법정동명
                    if(data.bname !== ''){

                        extraAddr += data.bname;

                    }

                    // 건물명
                    if(data.buildingName !== ''){

                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);

                    }

                    fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : '');

                }

                document.getElementById('address1').value = data.zonecode; //5자리 새우편번호 사용
                document.getElementById('address2').value = fullAddr;
                document.getElementById('address3').focus();

            }

        }).open();
    }
</script>

<?php
include $_SERVER['DOCUMENT_ROOT'].'/view/common/footer.html';
?>
